<!doctype html>
<html lang="en">
<head>
  <script type="text/javascript">
      var matrixCount = 0;
      var row;
      var col;

      function saveMatrix(event) {
            matrixCount++;
            var mat = [];

            for (i=1; i < row+1; i++){
              for (j=1; j < col+1; j++){
                var index = (j-1)+(row-1)*(i-1);
                if (document.getElementById("r"+i+"c"+j).value == "")
                {
                  mat[index] = "0";
                }
                else{
                  mat[index] = document.getElementById("r"+i+"c"+j).value;
                }
              }
            }

            sessionStorage.setItem("A"+matrixCount, JSON.stringify(mat));
            
            var listMatrix = document.createElement("div");
            document.getElementById("matrixList").appendChild(listMatrix);
            listMatrix.innerHTML = "A"+matrixCount;
            listMatrix.classList.add("box");

            //maybe add trash button at button of matrix list

            //maybe generate new var for matrix name

            //document.getElementById("r"+1+"c"+1).value = JSON.parse(sessionStorage.getItem("A1"))[1];
            document.getElementById("r"+1+"c"+1).value = document.getElementById("r"+1+"c"+2).value;

      };

      function matrixAdd(A,B){
        var C = [];
        
        for (i=0; i<2; i++){
          for (j=0; j<2; j++){
            var index = (j-1)+(row-1)*(i-1);
            C[index] = parseFloat(A[index]+B[index]);

          }
        }

        return C;

        //make if split with + and -, just add neg values for -
      }

      function matrixMult(){
      }

      function parseCalc(){
        if (document.getElementById("stuff").innerHTML == "A1 + A2"){
          var output = matrixAdd(JSON.parse(sessionStorage.getItem("A1")),JSON.parse(sessionStorage.getItem("A2")));
        }

        return output;

        //this is going to be annoying user input stuff
        //cannot have more than one calculation per line
        //display matrices with text?
      }

      function displayCalc(event){

            var bum = document.createElement("input");
            var business = document.getElementById("business");

            business.appendChild(bum);
            //bum.value = JSON.parse(sessionStorage.getItem("A1"))[1];

          var linebreak = document.createElement("br");
          document.getElementById("business").appendChild(linebreak);
        }



        //display calculations, can separate with some delimiter that induces line break

      function newMatrix(event) {
          row = parseInt(document.getElementById("row").value, 10);
          col = parseInt(document.getElementById("col").value, 10);

          var matrix = document.getElementById("matrix");
          matrix.innerHTML = "<br />";

          for (i=1; i < row+1; i++){
            for (j=1; j < col+1; j++){
              var trash = document.getElementById("r"+i+"c"+j);

              if ( trash ){
                trash.parentNode.removeChild(trash);
              }
            }
          }

          for (i = 1; i < row+1; i++){
            var linebreak = document.createElement("br");

            for (j = 1; j < col+1; j++){
                var entry = document.createElement("input");
                entry.maxLength = "4";
                entry.size = "1";
                matrix.appendChild(entry);
                entry.id = "r" + i + "c" + j;

                //I'd like to clear these ids after wiping the box, but I'm unsure if the ids are even saved if the boxes are cleared from the div
              }

            matrix.appendChild(linebreak);
          }
          
          var linebreak = document.createElement("br");
          var save = document.createElement("button");
          var saveText = document.createTextNode("Save");
          save.appendChild(saveText);
          save.onclick = saveMatrix;
          
          matrix.appendChild(linebreak);
          matrix.appendChild(save);

          document.getElementById("r"+1+"c"+2).value = "fart";
      }
  </script>
  <meta charset="utf-8">
  <title>MATCALC</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="assets/squarelogo.ico">
</head>
<body style="background-color: #fafafa;" >
  <app-root></app-root>
</body>
</html>
